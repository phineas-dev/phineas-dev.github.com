---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Image from '../components/Image.astro';
import Link from '../components/Link.astro';
import LinkButton from '../components/LinkButton.astro';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  color: string;
  backLink: string;
  backText: string;
  slug: string;
}

const {
  title,
  description,
  pubDate,
  updatedDate,
  backLink,
  backText,
  slug
} = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
  </head>

  <body class="bg-white text-gray-950 dark:bg-black dark:text-gray-50">
    <Header />
    <main class="container mx-auto px-4 py-8">
      <Link href={backLink}>
        <h1 class="text-xl mb-6">{backText}</h1>
      </Link>
      <article>
        <div class="prose max-w-4xl mx-auto p-4 text-gray-800 dark:text-gray-200">
          <div class="title mb-4 py-2 leading-none">
            <h1 class="text-5xl m-0 mb-6">{title}</h1>
            <div class="relative">
              <Image src={`/images/${slug}.jpg`} alt={`${title} overlay`} class="absolute top-0 left-0 w-full h-full opacity-20 z-10 mix-blend-color-burn" />
              <Image src={`/hero/${slug}.jpg`} alt={title} class="w-full rounded-t-lg rounded-e-lg shadow-md" />
            </div>
            <div class="date mb-2 text-gray-500">
              <FormattedDate date={pubDate} />
              {
                updatedDate && (
                  <div class="last-updated-on italic">
                    Last updated on <FormattedDate date={updatedDate} />
                  </div>
                )
              }
            </div>
          </div>
          <slot />
          <div class="text-center mt-8">
            <LinkButton href={backLink}>Back to {backText}</LinkButton>
          </div>
        </div>
      </article>
    </main>
    <Footer />
  </body>
</html>

<style is:global>
	p {
		padding: 1rem 0;
	}

	h1 {
		font-size: 1.5rem;
		line-height: 1.5;
	}

	h2 {
		font-size: 1.3rem;
		line-height: 1.5;
	}

	h3 {
		font-size: 1.16rem;
		line-height: 1.5;
	}

	h4 {
		font-size: 1rem;
		line-height: 2;
	}

	ul, ol {
		list-style-type: disc;
		padding-left: 2em;
		padding-bottom: 2em;
	}
</style>
