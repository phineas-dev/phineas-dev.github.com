---
import { getCollection } from 'astro:content';
import Link from '../components/Link.astro';
import PostCard from '../components/PostCard.astro';
import DefaultLayout from '../layouts/DefaultLayout.astro';

const blogPosts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const projectPosts = (await getCollection('projects')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const latestProject = projectPosts[0];
const latestPost = blogPosts[0];
---

<DefaultLayout 
  title="Hi, I'm Phineas"
  description="Frontend engineer with a passion for creating beautiful and functional web applications"
>
  <div class="max-w-7xl mx-auto">
    <section class="mb-24">
      <div class="text-xl">
        <h1 class="text-4xl font-bold my-4 text-gray-900 dark:text-gray-100">Hi, I'm Phineas</h1>
        <p class="text-gray-700 dark:text-gray-300 mb-8">
          I'm a frontend engineer with a passion for creating beautiful and functional web applications.
        </p>
        <p>View my <Link href="/resume">Resume</Link>. I am available for hire.</p>
      </div>
    </section>

    <div class="grid lg:grid-cols-2 gap-16">
      <section>
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Latest Project</h2>
          <Link href="/projects" class="text-sm hover:text-cyan-700 dark:hover:text-cyan-300 transition-colors">
            View all projects →
          </Link>
        </div>
        <PostCard post={latestProject} baseUrl="/projects/" variant="default" />
      </section>

      <section>
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Latest Blog Post</h2>
          <Link href="/tech-blog" class="text-sm hover:text-cyan-700 dark:hover:text-cyan-300 transition-colors">
            Read more posts →
          </Link>
        </div>
        <PostCard post={latestPost} baseUrl="/tech-blog/" variant="default" />
      </section>
    </div>
  </div>
</DefaultLayout>
