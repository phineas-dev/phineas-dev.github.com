---
import { getCollection } from 'astro:content';
import Link from '../components/Link.astro';
import PostCard from '../components/PostCard.astro';
import DefaultLayout from '../layouts/DefaultLayout.astro';
import Highlight from '../components/Highlight.astro';

const blogPosts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const projectPosts = (await getCollection('projects')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const latestProject = projectPosts[0];
const latestPost = blogPosts[0];
---

<DefaultLayout 
  title="Hi, I'm Phineas"
  description="Frontend engineer with a passion for creating beautiful and functional web applications"
>
  <div class="max-w-4xl mx-auto">
    <section class="mb-32">
      <div class="text-[1.125rem] max-w-4xl">
        <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100 tracking-tight mb-8">
          Frontend Engineer & Web Developer
        </h1>
        <p class="text-gray-700 dark:text-gray-300 mb-6 leading-[1.75] tracking-[-0.01em]">
          I specialize in creating modern web applications using <Highlight>React</Highlight>, <Highlight>TypeScript</Highlight>, and <Highlight>Node.js</Highlight>. 
          With over a decade of experience, I've built everything from <Highlight type="achievement">high-traffic social networks</Highlight> to 
          <Highlight type="achievement">enterprise-scale applications</Highlight>.
        </p>
        <p class="leading-[1.75] tracking-[-0.01em] text-gray-600 dark:text-gray-400">
          Currently available for new opportunities. View my <Link href="/resume" class="font-medium">Resume</Link> or check out my recent work below.
        </p>
      </div>
    </section>

    <div class="grid lg:grid-cols-2 gap-8 md:gap-16">
      <section class="group">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-[1.75rem] font-bold text-gray-900 dark:text-gray-100 tracking-tight">Latest Project</h2>
          <Link href="/projects" class="text-[0.9375rem] hover:text-cyan-700 dark:hover:text-cyan-300 transition-colors duration-300">
            View all projects →
          </Link>
        </div>
        <PostCard post={latestProject} baseUrl="/projects/" variant="default" />
      </section>

      <section class="group">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-[1.75rem] font-bold text-gray-900 dark:text-gray-100 tracking-tight">Latest Blog Post</h2>
          <Link href="/tech-blog" class="text-[0.9375rem] hover:text-cyan-700 dark:hover:text-cyan-300 transition-colors duration-300">
            Read more posts →
          </Link>
        </div>
        <PostCard post={latestPost} baseUrl="/tech-blog/" variant="default" />
      </section>
    </div>
  </div>
</DefaultLayout>
