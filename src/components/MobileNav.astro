---
import HeaderLink from './HeaderLink.astro';
---

<div id="mobile-nav" class="fixed inset-0 bg-white/95 dark:bg-black/95 backdrop-blur-md transform translate-x-full transition-all duration-300 ease-in-out z-50 sm:hidden flex flex-col">
  <div class="flex flex-col h-full">
    <div class="flex justify-end p-4">
      <button id="close-nav" aria-label="Close navigation menu" class="p-4 -m-2 text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 active:bg-gray-100 dark:active:bg-gray-800/50 rounded-lg transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <nav class="flex flex-col items-center justify-center min-h-[60vh] gap-8 px-6 py-12">
      <HeaderLink href="/" class="text-xl font-medium w-full text-center py-3 px-6 rounded-lg transition-colors text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800/50 active:bg-gray-200 dark:active:bg-gray-800">Home</HeaderLink>
      <HeaderLink href="/resume" class="text-xl font-medium w-full text-center py-3 px-6 rounded-lg transition-colors text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800/50 active:bg-gray-200 dark:active:bg-gray-800">Resume</HeaderLink>
      <HeaderLink href="/tech-blog" class="text-xl font-medium w-full text-center py-3 px-6 rounded-lg transition-colors text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800/50 active:bg-gray-200 dark:active:bg-gray-800">Tech Blog</HeaderLink>
      <HeaderLink href="/projects" class="text-xl font-medium w-full text-center py-3 px-6 rounded-lg transition-colors text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800/50 active:bg-gray-200 dark:active:bg-gray-800">Projects</HeaderLink>
    </nav>
  </div>
</div>

<style>
  /* Body scroll lock when nav is open */
  :global(body.overflow-hidden) {
    @apply fixed inset-0;
    touch-action: none;
  }

  #mobile-nav {
    touch-action: none;
  }

  #mobile-nav.translate-x-full {
    @apply opacity-0 pointer-events-none;
  }
</style>

<script>
  const mobileNav = document.getElementById('mobile-nav');
  const openNavButton = document.getElementById('open-nav');
  const closeNavButton = document.getElementById('close-nav');

  function toggleNav() {
    mobileNav?.classList.toggle('translate-x-full');
    document.body.classList.toggle('overflow-hidden');
  }

  openNavButton?.addEventListener('click', toggleNav);
  closeNavButton?.addEventListener('click', toggleNav);

  // Close menu when clicking on a link
  mobileNav?.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      toggleNav();
    });
  });
</script>
